/**
 * Angular Validation Framework (forked)
 * @version v0.1.1 - 2014-02-25
 * @link https://github.com/loosebits/angular-validate
 * @author Ignacio Baixas <ignacio@platan.us>, Rand McNeely <loosebits@gmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(a){"use strict";!function(a,b){function c(a,b){for(var c,d=0,e=0,f=0,g=0,h=0,i=[],j=0,k=a.length;k>j;j++)c=a[j],g?"'"===c?g=g%2?0:1:"\\"===c?g++:g=1:"'"===c?g=1:"["===c?d++:"]"===c?d--:"{"===c?e++:"}"===c?e--:"("===c?f++:")"===c?f--:c!==b||d||f||e||(i.push(a.substring(h,j)),h=j+1);return d||f||e||g?null:(i.push(a.substring(h)),i)}var d={};a.module("platanus.validate",["platanus.inflector"]).directive("validate",["$parse","$injector","$inflector",function(b,d,e){return{restrict:"AC",require:"ngModel",link:function(f,g,h,i){var j=function(b,c){var d=b.dyn?b.dyn(f,{$value:c}):[];return b.fun&&(a.isArray(d)||(d=[d]),d.unshift(c),d=(b.fun.validator||b.fun).apply(null,d)),i.$setValidity(b.as||"validate",d),d},k=[];a.forEach(c(h.validate,","),function(a){var c=a.match(/^\s*(is\s+)?(.*?)(\s+as\s+([^\s]+))?\s*$/i),f={};if(c){if(c[3]&&(f.as=e.camelize(c[4])),c[1])f.dyn=b(c[2]);else{if(c=c[2].match(/^(\w[\w\d-]+)(?::(.*?))?$/),!c)return;f.as||(f.as=e.camelize(c[1])),f.fun=d.get(e.camelize(c[1],!0)+"Validator"),c[2]&&(f.dyn=b(c[2]))}k.push(f)}}),i.$parsers.unshift(function(a){for(var b,c,d=0,e=!0;b=k[d++];)c=j(b,a),c||(e=!1);return a}),i.$formatters.unshift(function(a){for(var b,c,d=0,e=!0;b=k[d++];)b.fun&&b.fun.runOnLink&&(c=j(b,a),c||(e=!1));return a})}}}]).directive("validationGroup",["$timeout",function(c){return{restrict:"AC",require:"ngModel",link:function(e,f,g,h){var i=d[g.validationGroup];i===b&&(i=d[g.validationGroup]=[]),i.push(h),e.$watch(function(){return h.$viewValue},function(){h.$invalid||a.forEach(i,function(a){h!=a&&a.$invalid&&c(function(){a.$setViewValue(a.$viewValue)},0)})}),f.on("$destroy",function(){for(var a=i.length-1;a>=0;a--)i[a]===h&&i.splice(a,1)})}}}]).constant("RequiredValidator",{runOnLink:!0,validator:function(a){return!!a}}).constant("MatchValidator",function(a,b){return a?new RegExp(b).test(a):!0})}(a)}(angular);