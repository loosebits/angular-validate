/**
 * Angular Validation Framework
 * @version v0.1.0 - 2014-02-24
 * @link https://github.com/platanus/angular-validate
 * @author Ignacio Baixas <ignacio@platan.us>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(a){"use strict";!function(a,b){function c(a,b){for(var c,d=0,e=0,f=0,g=0,h=0,i=[],j=0,k=a.length;k>j;j++)c=a[j],g?"'"===c?g=g%2?0:1:"\\"===c?g++:g=1:"'"===c?g=1:"["===c?d++:"]"===c?d--:"{"===c?e++:"}"===c?e--:"("===c?f++:")"===c?f--:c!==b||d||f||e||(i.push(a.substring(h,j)),h=j+1);return d||f||e||g?null:(i.push(a.substring(h)),i)}var d={};a.module("platanus.validate",["platanus.inflector"]).directive("validate",["$parse","$injector","$inflector",function(d,e,f){return{restrict:"AC",require:"ngModel",link:function(g,h,i,j){var k=function(b,c){var d=b.dyn?b.dyn(g,{$value:c}):[];return b.fun&&(a.isArray(d)||(d=[d]),d.unshift(c),d=(b.fun.validator||b.fun).apply(null,d)),j.$setValidity(b.as||"validate",d),d},l=[];a.forEach(c(i.validate,","),function(a){var b=a.match(/^\s*(is\s+)?(.*?)(\s+as\s+([^\s]+))?\s*$/i),c={};if(b){if(b[3]&&(c.as=f.camelize(b[4])),b[1])c.dyn=d(b[2]);else{if(b=b[2].match(/^(\w[\w\d-]+)(?::(.*?))?$/),!b)return;c.as||(c.as=f.camelize(b[1])),c.fun=e.get(f.camelize(b[1],!0)+"Validator"),b[2]&&(c.dyn=d(b[2]))}l.push(c)}}),j.$parsers.unshift(function(a){for(var c,d,e=0,f=!0;c=l[e++];)d=k(c,a),d||(f=!1);return f?a:b}),j.$formatters.unshift(function(a){for(var b,c,d=0,e=!0;b=l[d++];)b.fun&&b.fun.runOnLink&&(c=k(b,a),c||(e=!1));return a})}}}]).directive("validationGroup",["$timeout",function(c){return{restrict:"AC",require:"ngModel",link:function(e,f,g,h){var i=d[g.validationGroup];i===b&&(i=d[g.validationGroup]=[]),i.push(h),e.$watch(function(){return h.$viewValue},function(){h.$invalid||a.forEach(i,function(a){h!=a&&a.$invalid&&c(function(){a.$setViewValue(a.$viewValue)},0)})}),f.on("$destroy",function(){for(var a=i.length-1;a>=0;a--)i[a]===h&&i.splice(a,1)})}}}]).constant("RequiredValidator",{runOnLink:!0,validator:function(a){return!!a}}).constant("MatchValidator",function(a,b){return a?new RegExp(b).test(a):!0})}(a)}(angular);